import React, { useState, useEffect } from 'react';
import { useAuth } from '../contexts/AuthContext';
import { useData } from '../contexts/DataContext';
import { useNavigate } from 'react-router-dom';
import MobileNavigation, { MobileContentWrapper } from '../components/MobileNavigation';
import PageContainer from '../components/PageContainer';

const Profile = () => {
  const { user, logout, isAdmin, isAuthenticated, signInWithGoogle } = useAuth();
  const { 
    userSettings, 
    updateSettings, 
    getStats, 
    savedWords, 
    likedArticles 
  } = useData();
  const navigate = useNavigate();
  
  const [recentWords, setRecentWords] = useState([]);
  const [recentArticles, setRecentArticles] = useState([]);
  const [saveMessage, setSaveMessage] = useState('');

  const stats = getStats();

  // ìµœê·¼ í™œë™ ë°ì´í„° ì¤€ë¹„
  useEffect(() => {
    // ìµœê·¼ 5ê°œ ë‹¨ì–´
    const recent = [...savedWords]
      .sort((a, b) => new Date(b.addedAt) - new Date(a.addedAt))
      .slice(0, 5);
    setRecentWords(recent);

    // ìµœê·¼ 5ê°œ ì¢‹ì•„ìš” ê¸°ì‚¬
    const recentLiked = [...likedArticles]
      .sort((a, b) => new Date(b.likedAt) - new Date(a.likedAt))
      .slice(0, 5);
    setRecentArticles(recentLiked);
  }, [savedWords, likedArticles]);

  // ì„¤ì • ë³€ê²½ - ì¦‰ì‹œ ì €ì¥
  const handleSettingChange = (key, value) => {
    updateSettings({ [key]: value });
    
    // ì €ì¥ ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
    setSaveMessage('âœ… ì €ì¥ë¨');
    setTimeout(() => setSaveMessage(''), 2000);
  };

  // ì‹œê°„ í˜•ì‹ í•¨ìˆ˜
  const formatTimeAgo = (dateString) => {
    const now = new Date();
    const past = new Date(dateString);
    const diffInMinutes = Math.floor((now - past) / (1000 * 60));
    
    if (diffInMinutes < 60) return `${diffInMinutes}ë¶„ ì „`;
    if (diffInMinutes < 1440) return `${Math.floor(diffInMinutes / 60)}ì‹œê°„ ì „`;
    return `${Math.floor(diffInMinutes / 1440)}ì¼ ì „`;
  };

  // ì–¸ì–´ ì˜µì…˜
  const languageOptions = [
    { code: 'ko', name: 'í•œêµ­ì–´', flag: 'ğŸ‡°ğŸ‡·' },
    { code: 'en', name: 'English', flag: 'ğŸ‡ºğŸ‡¸' },
    { code: 'ja', name: 'æ—¥æœ¬èª', flag: 'ğŸ‡¯ğŸ‡µ' },
    { code: 'zh', name: 'ä¸­æ–‡', flag: 'ğŸ‡¨ğŸ‡³' },
    { code: 'es', name: 'EspaÃ±ol', flag: 'ğŸ‡ªğŸ‡¸' },
    { code: 'fr', name: 'FranÃ§ais', flag: 'ğŸ‡«ğŸ‡·' },
    { code: 'de', name: 'Deutsch', flag: 'ğŸ‡©ğŸ‡ª' }
  ];

  // ë‹¤êµ­ì–´ í…ìŠ¤íŠ¸
  const translations = {
    ko: {
      admin: 'ğŸ‘‘ ê´€ë¦¬ì',
      user: 'ğŸ‘¤ ì¼ë°˜ ì‚¬ìš©ì',
      learningLevel: 'í•™ìŠµ ë ˆë²¨',
      level: 'ë ˆë²¨',
      nextLevel: 'ë‹¤ìŒ ë ˆë²¨ê¹Œì§€',
      words: 'ê°œ ë‹¨ì–´',
      wordCollector: 'ğŸ† ë‹¨ì–´ ìˆ˜ì§‘ê°€',
      bookworm: 'â¤ï¸ ë…ì„œê´‘',
      weekMVP: 'ğŸ”¥ ì´ë²ˆ ì£¼ MVP',
      learner: 'ğŸ“š í•™ìŠµì',
      logout: 'ë¡œê·¸ì•„ì›ƒ',
      learningStats: 'ğŸ“Š í•™ìŠµ í†µê³„',
      savedWords: 'ì €ì¥ ë‹¨ì–´',
      likedArticles: 'ì¢‹ì•„ìš” ê¸°ì‚¬',
      thisWeekWords: 'ì´ë²ˆ ì£¼ ë‹¨ì–´',
      streakDays: 'ì—°ì† í•™ìŠµì¼',
      quickActions: 'ğŸš€ ë¹ ë¥¸ ì•¡ì…˜',
      viewWordbook: 'ğŸ“š ë‹¨ì–´ì¥ ë³´ê¸°',
      viewLikedArticles: 'â¤ï¸ ì¢‹ì•„ìš” ê¸°ì‚¬',
      adminDashboard: 'ğŸ”§ ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ',
      settings: 'âš™ï¸ ì„¤ì •',
      saved: 'âœ… ì €ì¥ë¨',
      interfaceLanguage: 'ğŸŒ ì¸í„°í˜ì´ìŠ¤ ì–¸ì–´',
      interfaceLanguageDesc: 'ì•± í™”ë©´ í‘œì‹œ ì–¸ì–´',
      translationLanguage: 'ğŸŒ ë²ˆì—­ ì–¸ì–´',
      translationLanguageDesc: 'ë‹¨ì–´ í´ë¦­ ì‹œ ë²ˆì—­ ì–¸ì–´',
      ttsSpeed: 'âš¡ TTS ì†ë„',
      ttsSpeedDesc: 'ìŒì„± ì¬ìƒ ì†ë„',
      ttsPause: 'â¸ï¸ TTS ê°„ê²©',
      ttsPauseDesc: 'ë¬¸ì¥ ê°„ ì¼ì‹œì •ì§€ ì‹œê°„',
      autoSaveWords: 'ğŸ’¾ ìë™ ë‹¨ì–´ ì €ì¥',
      autoSaveWordsDesc: 'ë‹¨ì–´ í´ë¦­ ì‹œ ìë™ìœ¼ë¡œ ì €ì¥',
      autoAudioPlay: 'ğŸ”Š ìë™ ìŒì„± ì¬ìƒ',
      autoAudioPlayDesc: 'ë‹¨ì–´ íŒì—… ì‹œ ìë™ ë°œìŒ',
      highlightWords: 'âœ¨ ì €ì¥ëœ ë‹¨ì–´ í•˜ì´ë¼ì´íŠ¸',
      highlightWordsDesc: 'ê¸°ì‚¬ì—ì„œ ì €ì¥ëœ ë‹¨ì–´ ê°•ì¡° í‘œì‹œ',
      recentActivity: 'ğŸ“Š ìµœê·¼ í™œë™',
      recentSavedWords: 'ğŸ’¾ ìµœê·¼ ì €ì¥í•œ ë‹¨ì–´',
      recentLikedArticles: 'â¤ï¸ ìµœê·¼ ì¢‹ì•„ìš”í•œ ê¸°ì‚¬',
      noSavedWords: 'ì•„ì§ ì €ì¥í•œ ë‹¨ì–´ê°€ ì—†ìŠµë‹ˆë‹¤',
      noLikedArticles: 'ì•„ì§ ì¢‹ì•„ìš”í•œ ê¸°ì‚¬ê°€ ì—†ìŠµë‹ˆë‹¤'
    },
    en: {
      admin: 'ğŸ‘‘ Admin',
      user: 'ğŸ‘¤ User',
      learningLevel: 'Learning Level',
      level: 'Level',
      nextLevel: 'words to next level',
      words: ' words',
      wordCollector: 'ğŸ† Word Collector',
      bookworm: 'â¤ï¸ Bookworm',
      weekMVP: 'ğŸ”¥ Week MVP',
      learner: 'ğŸ“š Learner',
      logout: 'Logout',
      learningStats: 'ğŸ“Š Learning Stats',
      savedWords: 'Saved Words',
      likedArticles: 'Liked Articles',
      thisWeekWords: 'This Week Words',
      streakDays: 'Streak Days',
      quickActions: 'ğŸš€ Quick Actions',
      viewWordbook: 'ğŸ“š View Wordbook',
      viewLikedArticles: 'â¤ï¸ Liked Articles',
      adminDashboard: 'ğŸ”§ Admin Dashboard',
      settings: 'âš™ï¸ Settings',
      saved: 'âœ… Saved',
      interfaceLanguage: 'ğŸŒ Interface Language',
      interfaceLanguageDesc: 'App display language',
      translationLanguage: 'ğŸŒ Translation Language',
      translationLanguageDesc: 'Language for word translation',
      ttsSpeed: 'âš¡ TTS Speed',
      ttsSpeedDesc: 'Text-to-speech playback speed',
      ttsPause: 'â¸ï¸ TTS Pause',
      ttsPauseDesc: 'Pause between sentences',
      autoSaveWords: 'ğŸ’¾ Auto Save Words',
      autoSaveWordsDesc: 'Automatically save clicked words',
      autoAudioPlay: 'ğŸ”Š Auto Audio Play',
      autoAudioPlayDesc: 'Auto pronunciation on word popup',
      highlightWords: 'âœ¨ Highlight Saved Words',
      highlightWordsDesc: 'Highlight saved words in articles',
      recentActivity: 'ğŸ“Š Recent Activity',
      recentSavedWords: 'ğŸ’¾ Recently Saved Words',
      recentLikedArticles: 'â¤ï¸ Recently Liked Articles',
      noSavedWords: 'No saved words yet',
      noLikedArticles: 'No liked articles yet'
    },
    ja: {
      admin: 'ğŸ‘‘ ç®¡ç†è€…',
      user: 'ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼',
      learningLevel: 'å­¦ç¿’ãƒ¬ãƒ™ãƒ«',
      level: 'ãƒ¬ãƒ™ãƒ«',
      nextLevel: 'æ¬¡ã®ãƒ¬ãƒ™ãƒ«ã¾ã§',
      words: 'å€‹ã®å˜èª',
      wordCollector: 'ğŸ† å˜èªã‚³ãƒ¬ã‚¯ã‚¿ãƒ¼',
      bookworm: 'â¤ï¸ èª­æ›¸å®¶',
      weekMVP: 'ğŸ”¥ ä»Šé€±ã®MVP',
      learner: 'ğŸ“š å­¦ç¿’è€…',
      logout: 'ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ',
      learningStats: 'ğŸ“Š å­¦ç¿’çµ±è¨ˆ',
      savedWords: 'ä¿å­˜ã—ãŸå˜èª',
      likedArticles: 'ã„ã„ã­ã—ãŸè¨˜äº‹',
      thisWeekWords: 'ä»Šé€±ã®å˜èª',
      streakDays: 'é€£ç¶šå­¦ç¿’æ—¥',
      quickActions: 'ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³',
      viewWordbook: 'ğŸ“š å˜èªå¸³ã‚’è¦‹ã‚‹',
      viewLikedArticles: 'â¤ï¸ ã„ã„ã­ã—ãŸè¨˜äº‹',
      adminDashboard: 'ğŸ”§ ç®¡ç†è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰',
      settings: 'âš™ï¸ è¨­å®š',
      saved: 'âœ… ä¿å­˜æ¸ˆã¿',
      interfaceLanguage: 'ğŸŒ ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹è¨€èª',
      interfaceLanguageDesc: 'ã‚¢ãƒ—ãƒªè¡¨ç¤ºè¨€èª',
      translationLanguage: 'ğŸŒ ç¿»è¨³è¨€èª',
      translationLanguageDesc: 'å˜èªã‚¯ãƒªãƒƒã‚¯æ™‚ã®ç¿»è¨³è¨€èª',
      ttsSpeed: 'âš¡ TTSé€Ÿåº¦',
      ttsSpeedDesc: 'éŸ³å£°å†ç”Ÿé€Ÿåº¦',
      ttsPause: 'â¸ï¸ TTSé–“éš”',
      ttsPauseDesc: 'æ–‡é–“ã®ä¸€æ™‚åœæ­¢æ™‚é–“',
      autoSaveWords: 'ğŸ’¾ è‡ªå‹•å˜èªä¿å­˜',
      autoSaveWordsDesc: 'å˜èªã‚¯ãƒªãƒƒã‚¯æ™‚ã«è‡ªå‹•ä¿å­˜',
      autoAudioPlay: 'ğŸ”Š è‡ªå‹•éŸ³å£°å†ç”Ÿ',
      autoAudioPlayDesc: 'å˜èªãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—æ™‚ã®è‡ªå‹•ç™ºéŸ³',
      highlightWords: 'âœ¨ ä¿å­˜å˜èªã®ãƒã‚¤ãƒ©ã‚¤ãƒˆ',
      highlightWordsDesc: 'è¨˜äº‹å†…ã®ä¿å­˜å˜èªã‚’å¼·èª¿è¡¨ç¤º',
      recentActivity: 'ğŸ“Š æœ€è¿‘ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£',
      recentSavedWords: 'ğŸ’¾ æœ€è¿‘ä¿å­˜ã—ãŸå˜èª',
      recentLikedArticles: 'â¤ï¸ æœ€è¿‘ã„ã„ã­ã—ãŸè¨˜äº‹',
      noSavedWords: 'ã¾ã ä¿å­˜ã—ãŸå˜èªãŒã‚ã‚Šã¾ã›ã‚“',
      noLikedArticles: 'ã¾ã ã„ã„ã­ã—ãŸè¨˜äº‹ãŒã‚ã‚Šã¾ã›ã‚“'
    }
  };

  // í˜„ì¬ ì–¸ì–´ (ê¸°ë³¸ê°’: í•œêµ­ì–´)
  const currentLanguage = userSettings.language || 'ko';
  const t = translations[currentLanguage] || translations.ko;

  // ìŠ¤íƒ€ì¼
  const styles = {
    container: {
      background: 'linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)',
      minHeight: '100vh',
      paddingTop: '1rem'
    },
    header: {
      textAlign: 'center',
      marginBottom: '2rem'
    },
    title: {
      fontSize: '2.5rem',
      fontWeight: 'bold',
      color: '#1f2937',
      marginBottom: '0.5rem'
    },
    subtitle: {
      color: '#6b7280',
      fontSize: '1rem'
    },
    grid: {
      display: 'grid',
      gridTemplateColumns: 'repeat(auto-fit, minmax(350px, 1fr))',
      gap: '1.5rem',
      marginBottom: '2rem'
    },
    card: {
      backgroundColor: '#ffffff',
      borderRadius: '12px',
      padding: '1.5rem',
      boxShadow: '0 4px 20px rgba(0, 0, 0, 0.08)',
      border: '1px solid #e5e7eb'
    },
    button: {
      padding: '0.75rem 1.5rem',
      borderRadius: '8px',
      border: 'none',
      fontWeight: '600',
      cursor: 'pointer',
      transition: 'all 0.2s',
      fontSize: '0.875rem'
    },
    primaryButton: {
      backgroundColor: '#2563eb',
      color: '#ffffff'
    },
    input: {
      width: '100%',
      padding: '0.75rem',
      border: '1px solid #d1d5db',
      borderRadius: '8px',
      fontSize: '0.875rem'
    },
    toggleContainer: {
      display: 'flex',
      justifyContent: 'space-between',
      alignItems: 'center',
      padding: '1rem 0'
    },
    toggle: {
      position: 'relative',
      width: '44px',
      height: '24px',
      backgroundColor: '#d1d5db',
      borderRadius: '12px',
      cursor: 'pointer',
      transition: 'background-color 0.2s'
    },
    toggleActive: {
      backgroundColor: '#2563eb'
    },
    toggleKnob: {
      position: 'absolute',
      top: '2px',
      left: '2px',
      width: '20px',
      height: '20px',
      backgroundColor: '#ffffff',
      borderRadius: '50%',
      transition: 'transform 0.2s'
    },
    toggleKnobActive: {
      transform: 'translateX(20px)'
    }
  };

  if (!isAuthenticated) {
    return (
      <MobileNavigation />
      <MobileContentWrapper>
        <div style={styles.container}>
          <PageContainer>
            <div style={{ maxWidth: '800px', margin: '0 auto', padding: '2rem', textAlign: 'center' }}>
              <div style={{ marginBottom: '3rem' }}>
                <div style={{ fontSize: '4rem', marginBottom: '1rem' }}>ğŸ‘¤</div>
                <h2 style={{ fontSize: '2rem', fontWeight: '700', color: '#333', margin: '0 0 0.5rem 0' }}>ê°œì¸ í”„ë¡œí•„</h2>
                <p style={{ fontSize: '1.1rem', color: '#666', margin: '0' }}>ê°œì¸í™”ëœ í•™ìŠµ ê²½í—˜ê³¼ ì§„ë„ ì¶”ì </p>
              </div>
              
              <div style={{ display: 'grid', gap: '2rem', marginBottom: '3rem', textAlign: 'left' }}>
                <div style={{ display: 'flex', alignItems: 'flex-start', gap: '1rem', padding: '1.5rem', background: '#f8f9fa', borderRadius: '12px', border: '1px solid #e9ecef' }}>
                  <div style={{ fontSize: '2rem', flexShrink: 0 }}>ğŸ“Š</div>
                  <div style={{ flex: 1 }}>
                    <h3 style={{ fontSize: '1.1rem', fontWeight: '600', color: '#333', margin: '0 0 0.5rem 0' }}>í•™ìŠµ í†µê³„</h3>
                    <p style={{ fontSize: '0.95rem', color: '#666', margin: '0', lineHeight: '1.5' }}>ì €ì¥í•œ ë‹¨ì–´ ìˆ˜, ì½ì€ ê¸°ì‚¬ ìˆ˜, í•™ìŠµ ì—°ì†ì¼ ë“± ê°œì¸ í•™ìŠµ ê¸°ë¡ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
                  </div>
                </div>
                
                <div style={{ display: 'flex', alignItems: 'flex-start', gap: '1rem', padding: '1.5rem', background: '#f8f9fa', borderRadius: '12px', border: '1px solid #e9ecef' }}>
                  <div style={{ fontSize: '2rem', flexShrink: 0 }}>âš™ï¸</div>
                  <div style={{ flex: 1 }}>
                    <h3 style={{ fontSize: '1.1rem', fontWeight: '600', color: '#333', margin: '0 0 0.5rem 0' }}>ê°œì¸ ì„¤ì •</h3>
                    <p style={{ fontSize: '0.95rem', color: '#666', margin: '0', lineHeight: '1.5' }}>ë²ˆì—­ ì–¸ì–´, TTS ì†ë„, ìë™ ì €ì¥ ë“± ê°œì¸ ë§ì¶¤ ì„¤ì •ì„ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
                  </div>
                </div>
                
                <div style={{ display: 'flex', alignItems: 'flex-start', gap: '1rem', padding: '1.5rem', background: '#f8f9fa', borderRadius: '12px', border: '1px solid #e9ecef' }}>
                  <div style={{ fontSize: '2rem', flexShrink: 0 }}>ğŸ†</div>
                  <div style={{ flex: 1 }}>
                    <h3 style={{ fontSize: '1.1rem', fontWeight: '600', color: '#333', margin: '0 0 0.5rem 0' }}>í•™ìŠµ ë ˆë²¨</h3>
                    <p style={{ fontSize: '0.95rem', color: '#666', margin: '0', lineHeight: '1.5' }}>í•™ìŠµ í™œë™ì— ë”°ë¼ ë ˆë²¨ì´ ìƒìŠ¹í•˜ë©°, ì„±ì·¨ ë°°ì§€ì™€ í•¨ê»˜ ë™ê¸°ë¶€ì—¬ë¥¼ ì œê³µí•©ë‹ˆë‹¤</p>
                  </div>
                </div>
                
                <div style={{ display: 'flex', alignItems: 'flex-start', gap: '1rem', padding: '1.5rem', background: '#f8f9fa', borderRadius: '12px', border: '1px solid #e9ecef' }}>
                  <div style={{ fontSize: '2rem', flexShrink: 0 }}>ğŸ“ˆ</div>
                  <div style={{ flex: 1 }}>
                    <h3 style={{ fontSize: '1.1rem', fontWeight: '600', color: '#333', margin: '0 0 0.5rem 0' }}>ìµœê·¼ í™œë™</h3>
                    <p style={{ fontSize: '0.95rem', color: '#666', margin: '0', lineHeight: '1.5' }}>ìµœê·¼ ì €ì¥í•œ ë‹¨ì–´, ì¢‹ì•„ìš”í•œ ê¸°ì‚¬ ë“± í•™ìŠµ í™œë™ ê¸°ë¡ì„ ì‰½ê²Œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
                  </div>
                </div>
              </div>
              
              <div style={{ padding: '2rem', background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', borderRadius: '16px', color: 'white', textAlign: 'center' }}>
                <p style={{ fontSize: '1.1rem', margin: '0 0 1.5rem 0', opacity: '0.9' }}>ê°œì¸ í”„ë¡œí•„ì„ ì‚¬ìš©í•˜ë ¤ë©´ ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤</p>
                <button 
                  onClick={signInWithGoogle}
                  style={{
                    background: 'white',
                    color: '#333',
                    border: 'none',
                    padding: '12px 32px',
                    borderRadius: '8px',
                    fontSize: '1rem',
                    fontWeight: '600',
                    cursor: 'pointer',
                    transition: 'all 0.3s ease'
                  }}
                  onMouseOver={(e) => {
                    e.target.style.background = '#f8f9fa';
                    e.target.style.transform = 'translateY(-2px)';
                    e.target.style.boxShadow = '0 4px 12px rgba(0, 0, 0, 0.2)';
                  }}
                  onMouseOut={(e) => {
                    e.target.style.background = 'white';
                    e.target.style.transform = 'translateY(0)';
                    e.target.style.boxShadow = 'none';
                  }}
                >
                  Googleë¡œ ë¡œê·¸ì¸í•˜ê¸°
                </button>
              </div>
            </div>
          </PageContainer>
        </div>
      </MobileContentWrapper>
    );
  }

  return (
    <>
      <MobileNavigation />
      <MobileContentWrapper>
        <div style={styles.container}>
          <PageContainer>
            
            {/* í—¤ë” ì‚­ì œë¨ */}

            {/* ë©”ì¸ ê·¸ë¦¬ë“œ */}
            <div style={styles.grid}>
              
              {/* í”„ë¡œí•„ ì¹´ë“œ */}
              <div style={{...styles.card, textAlign: 'center'}}>
                <div style={{
                  width: '80px',
                  height: '80px',
                  background: 'linear-gradient(135deg, #3b82f6, #8b5cf6)',
                  borderRadius: '50%',
                  display: 'flex',
                  alignItems: 'center',
                  justifyContent: 'center',
                  margin: '0 auto 1rem',
                  fontSize: '2rem',
                  fontWeight: 'bold', 
                  color: '#ffffff'
                }}>
                  {user?.name?.charAt(0)?.toUpperCase() || 'U'}
                </div>
                <h2 style={{fontSize: '1.25rem', fontWeight: 'bold', color: '#1f2937', marginBottom: '0.5rem'}}>
                  {user?.name}
                </h2>
                <p style={{color: '#6b7280', marginBottom: '0.5rem'}}>{user?.email}</p>
                
                {/* ì—­í•  ë°°ì§€ */}
                <div style={{
                  display: 'inline-block',
                  padding: '0.25rem 0.75rem',
                  borderRadius: '9999px',
                  fontSize: '0.75rem',
                  fontWeight: '600',
                  backgroundColor: isAdmin ? '#fef3c7' : '#dbeafe',
                  color: isAdmin ? '#92400e' : '#1d4ed8',
                  marginBottom: '1.5rem'
                }}>
                  {isAdmin ? t.admin : t.user}
                </div>
                
                {/* ë ˆë²¨ ì‹œìŠ¤í…œ */}
                <div style={{marginBottom: '1.5rem'}}>
                  <div style={{fontSize: '0.875rem', color: '#6b7280', marginBottom: '0.5rem'}}>{t.learningLevel}</div>
                  <div style={{fontSize: '1.5rem', fontWeight: 'bold', color: '#2563eb', marginBottom: '0.5rem'}}>
                    {t.level} {Math.floor(stats.totalWords / 10) + 1}
                  </div>
                  <div style={{
                    width: '100%',
                    height: '8px',
                    backgroundColor: '#e5e7eb',
                    borderRadius: '4px',
                    overflow: 'hidden',
                    marginBottom: '0.5rem'
                  }}>
                    <div style={{
                      width: `${(stats.totalWords % 10) * 10}%`,
                      height: '100%',
                      backgroundColor: '#2563eb',
                      transition: 'width 0.3s'
                    }}></div>
                  </div>
                  <div style={{fontSize: '0.75rem', color: '#6b7280'}}>
                    {t.nextLevel} {10 - (stats.totalWords % 10)}{t.words}
                  </div>
                </div>

                {/* ë°°ì§€ */}
                <div style={{
                  display: 'grid',
                  gridTemplateColumns: 'repeat(2, 1fr)',
                  gap: '0.5rem',
                  marginBottom: '1.5rem'
                }}>
                  {stats.totalWords >= 50 && (
                    <div style={{
                      backgroundColor: '#fef3c7',
                      color: '#92400e',
                      fontSize: '0.75rem',
                      padding: '0.25rem 0.5rem',
                      borderRadius: '9999px',
                      textAlign: 'center'
                    }}>
                      {t.wordCollector}
                    </div>
                  )}
                  {stats.totalLikedArticles >= 20 && (
                    <div style={{
                      backgroundColor: '#fecaca',
                      color: '#b91c1c',
                      fontSize: '0.75rem',
                      padding: '0.25rem 0.5rem',
                      borderRadius: '9999px',
                      textAlign: 'center'
                    }}>
                      {t.bookworm}
                    </div>
                  )}
                  {stats.wordsThisWeek >= 20 && (
                    <div style={{
                      backgroundColor: '#bbf7d0',
                      color: '#059669',
                      fontSize: '0.75rem',
                      padding: '0.25rem 0.5rem',
                      borderRadius: '9999px',
                      textAlign: 'center'
                    }}>
                      {t.weekMVP}
                    </div>
                  )}
                  <div style={{
                    backgroundColor: '#dbeafe',
                    color: '#1d4ed8',
                    fontSize: '0.75rem',
                    padding: '0.25rem 0.5rem',
                    borderRadius: '9999px',
                    textAlign: 'center'
                  }}>
                    {t.learner}
                  </div>
                </div>

                <button 
                  onClick={logout}
                  style={{
                    ...styles.button,
                    backgroundColor: '#f3f4f6',
                    color: '#4b5563',
                    width: '100%'
                  }}
                >
                  {t.logout}
                </button>
              </div>

              {/* í•™ìŠµ í†µê³„ */}
              <div style={styles.card}>
                <h3 style={{fontSize: '1.25rem', fontWeight: 'bold', color: '#1f2937', marginBottom: '1rem'}}>
                  {t.learningStats}
                </h3>
                <div style={{
                  display: 'grid',
                  gridTemplateColumns: 'repeat(2, 1fr)',
                  gap: '1rem'
                }}>
                  <div style={{textAlign: 'center'}}>
                    <div style={{fontSize: '1.5rem', fontWeight: 'bold', color: '#2563eb'}}>
                      {stats.totalWords}
                    </div>
                    <div style={{fontSize: '0.875rem', color: '#6b7280'}}>{t.savedWords}</div>
                  </div>
                  <div style={{textAlign: 'center'}}>
                    <div style={{fontSize: '1.5rem', fontWeight: 'bold', color: '#dc2626'}}>
                      {stats.totalLikedArticles}
                    </div>
                    <div style={{fontSize: '0.875rem', color: '#6b7280'}}>{t.likedArticles}</div>
                  </div>
                  <div style={{textAlign: 'center'}}>
                    <div style={{fontSize: '1.5rem', fontWeight: 'bold', color: '#059669'}}>
                      {stats.wordsThisWeek}
                    </div>
                    <div style={{fontSize: '0.875rem', color: '#6b7280'}}>{t.thisWeekWords}</div>
                  </div>
                  <div style={{textAlign: 'center'}}>
                    <div style={{fontSize: '1.5rem', fontWeight: 'bold', color: '#7c3aed'}}>
                      {Math.floor((stats.totalWords + stats.totalLikedArticles) / 7)}
                    </div>
                    <div style={{fontSize: '0.875rem', color: '#6b7280'}}>{t.streakDays}</div>
                  </div>
                </div>
              </div>

              {/* ë¹ ë¥¸ ì•¡ì…˜ */}
              <div style={styles.card}>
                <h3 style={{fontSize: '1.25rem', fontWeight: 'bold', color: '#1f2937', marginBottom: '1rem'}}>
                  {t.quickActions}
                </h3>
                <div style={{display: 'flex', flexDirection: 'column', gap: '1rem'}}>
                  <button 
                    onClick={() => navigate('/wordbook')}
                    style={{
                      ...styles.button,
                      ...styles.primaryButton,
                      width: '100%',
                      display: 'flex',
                      alignItems: 'center',
                      justifyContent: 'center'
                    }}
                  >
                    {t.viewWordbook} ({stats.totalWords}ê°œ)
                  </button>
                  <button 
                    onClick={() => navigate('/like')}
                    style={{
                      ...styles.button,
                      backgroundColor: '#7c3aed',
                      color: '#ffffff',
                      width: '100%',
                      display: 'flex',
                      alignItems: 'center',
                      justifyContent: 'center'
                    }}
                  >
                    {t.viewLikedArticles} ({stats.totalLikedArticles}ê°œ)
                  </button>
                  
                  {/* ê´€ë¦¬ìë§Œ ë³¼ ìˆ˜ ìˆëŠ” ëŒ€ì‹œë³´ë“œ ë²„íŠ¼ */}
                  {isAdmin && (
                    <button 
                  onClick={() => navigate('/dashboard')}
                      style={{
                        ...styles.button,
                        background: 'linear-gradient(135deg, #f59e0b, #d97706)',
                        color: '#ffffff',
                        width: '100%',
                        display: 'flex',
                        alignItems: 'center',
                        justifyContent: 'center',
                        border: '2px solid #f59e0b',
                        boxShadow: '0 4px 15px rgba(245, 158, 11, 0.3)'
                      }}
                    >
                      {t.adminDashboard}
                    </button>
                  )}
                </div>
              </div>
            </div>

            {/* ì„¤ì • ì„¹ì…˜ */}
            <div style={{...styles.card, marginBottom: '2rem'}}>
              <div style={{marginBottom: '1.5rem'}}>
                <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center'}}>
                  <h3 style={{fontSize: '1.25rem', fontWeight: 'bold', color: '#1f2937'}}>{t.settings}</h3>
                  {saveMessage && (
                    <div style={{
                      fontSize: '0.875rem',
                      color: '#059669',
                      fontWeight: '500',
                      backgroundColor: '#d1fae5',
                      padding: '0.25rem 0.75rem',
                      borderRadius: '6px',
                      animation: 'fadeIn 0.3s ease-in-out'
                    }}>
                      {t.saved}
                    </div>
                  )}
                </div>
              </div>

              <div style={{
                display: 'grid',
                gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))',
                gap: '1.5rem'
              }}>
                
                {/* ì¸í„°í˜ì´ìŠ¤ ì–¸ì–´ */}
                <div>
                  <label style={{
                    display: 'block',
                    fontSize: '0.875rem',
                    fontWeight: '500',
                    color: '#374151',
                    marginBottom: '0.5rem'
                  }}>
                    {t.interfaceLanguage}
                  </label>
                  <div style={{fontSize: '0.75rem', color: '#6b7280', marginBottom: '0.5rem'}}>
                    {t.interfaceLanguageDesc}
                  </div>
                  <select 
                    value={userSettings.language || 'ko'}
                    onChange={(e) => handleSettingChange('language', e.target.value)}
                    style={styles.input}
                  >
                    {languageOptions.slice(0, 3).map(lang => ( // í•œêµ­ì–´, ì˜ì–´, ì¼ë³¸ì–´ë§Œ ì§€ì›
                      <option key={lang.code} value={lang.code}>
                        {lang.flag} {lang.name}
                      </option>
                    ))}
                  </select>
                </div>
                
                {/* ë²ˆì—­ ì–¸ì–´ */}
                <div>
                  <label style={{
                    display: 'block',
                    fontSize: '0.875rem',
                    fontWeight: '500',
                    color: '#374151',
                    marginBottom: '0.5rem'
                  }}>
                    {t.translationLanguage}
                    </label>
                  <div style={{fontSize: '0.75rem', color: '#6b7280', marginBottom: '0.5rem'}}>
                    {t.translationLanguageDesc}
                  </div>
                  <select 
                    value={userSettings.translationLanguage}
                    onChange={(e) => handleSettingChange('translationLanguage', e.target.value)}
                    style={styles.input}
                  >
                    {languageOptions.map(lang => (
                      <option key={lang.code} value={lang.code}>
                        {lang.flag} {lang.name}
                      </option>
                    ))}
                  </select>
                </div>

                {/* TTS ì†ë„ */}
                <div>
                  <label style={{
                    display: 'block',
                    fontSize: '0.875rem',
                    fontWeight: '500',
                    color: '#374151',
                    marginBottom: '0.5rem'
                  }}>
                    {t.ttsSpeed}: {userSettings.ttsSpeed}x
                  </label>
                  <div style={{fontSize: '0.75rem', color: '#6b7280', marginBottom: '0.5rem'}}>
                    {t.ttsSpeedDesc}
                  </div>
                  <input
                    type="range"
                    min="0.5"
                    max="2.0"
                    step="0.1"
                    value={userSettings.ttsSpeed}
                    onChange={(e) => handleSettingChange('ttsSpeed', parseFloat(e.target.value))}
                    style={{width: '100%'}}
                  />
                  <div style={{display: 'flex', justifyContent: 'space-between', fontSize: '0.75rem', color: '#6b7280'}}>
                    <span>0.5x</span>
                    <span>1.0x</span>
                    <span>2.0x</span>
                  </div>
                </div>

                {/* ìë™ ì €ì¥ ë‹¨ì–´ */}
                <div style={styles.toggleContainer}>
                  <div>
                    <div style={{fontWeight: '500', color: '#374151'}}>{t.autoSaveWords}</div>
                    <div style={{fontSize: '0.875rem', color: '#6b7280'}}>{t.autoSaveWordsDesc}</div>
                  </div>
                  <div 
                    onClick={() => handleSettingChange('autoSaveWords', !userSettings.autoSaveWords)}
                    style={{
                      ...styles.toggle,
                      ...(userSettings.autoSaveWords ? styles.toggleActive : {}),
                      cursor: 'pointer'
                    }}
                  >
                    <div style={{
                      ...styles.toggleKnob,
                      ...(userSettings.autoSaveWords ? styles.toggleKnobActive : {})
                    }}></div>
                  </div>
                </div>

                {/* ìë™ ìŒì„± ì¬ìƒ */}
                <div style={styles.toggleContainer}>
                  <div>
                    <div style={{fontWeight: '500', color: '#374151'}}>{t.autoAudioPlay}</div>
                    <div style={{fontSize: '0.875rem', color: '#6b7280'}}>{t.autoAudioPlayDesc}</div>
                  </div>
                  <div 
                    onClick={() => handleSettingChange('autoPlay', !userSettings.autoPlay)}
                    style={{
                      ...styles.toggle,
                      ...(userSettings.autoPlay ? styles.toggleActive : {}),
                      cursor: 'pointer'
                    }}
                  >
                    <div style={{
                      ...styles.toggleKnob,
                      ...(userSettings.autoPlay ? styles.toggleKnobActive : {})
                    }}></div>
                  </div>
                </div>

                {/* ì €ì¥ëœ ë‹¨ì–´ í•˜ì´ë¼ì´íŠ¸ */}
                <div style={styles.toggleContainer}>
                  <div>
                    <div style={{fontWeight: '500', color: '#374151'}}>{t.highlightWords}</div>
                    <div style={{fontSize: '0.875rem', color: '#6b7280'}}>{t.highlightWordsDesc}</div>
                  </div>
                  <div 
                    onClick={() => handleSettingChange('highlightSavedWords', !userSettings.highlightSavedWords)}
                    style={{
                      ...styles.toggle,
                      ...(userSettings.highlightSavedWords ? styles.toggleActive : {}),
                      cursor: 'pointer'
                    }}
                  >
                    <div style={{
                      ...styles.toggleKnob,
                      ...(userSettings.highlightSavedWords ? styles.toggleKnobActive : {})
                    }}></div>
                  </div>
                </div>
              </div>
            </div>

            {/* ìµœê·¼ í™œë™ - ì „ì²´ ë„ˆë¹„ë¡œ í™•ì¥ */}
            <div style={{...styles.card, marginBottom: '2rem'}}>
              <h3 style={{fontSize: '1.25rem', fontWeight: 'bold', color: '#1f2937', marginBottom: '1rem'}}>
                {t.recentActivity}
              </h3>
              
              {/* ìµœê·¼ í™œë™ì„ 2ì¹¸ ê·¸ë¦¬ë“œë¡œ ì¢Œìš° í™•ì¥ */}
              <div style={{
                display: 'grid',
                gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))',
                gap: '2rem'
              }}>
                {/* ìµœê·¼ ì €ì¥ ë‹¨ì–´ */}
                <div>
                  <h4 style={{
                    fontWeight: '600',
                    color: '#374151',
                    marginBottom: '1rem',
                    fontSize: '1.1rem',
                    borderBottom: '2px solid #f3f4f6',
                    paddingBottom: '0.5rem'
                  }}>
                    {t.recentSavedWords}
                  </h4>
                  <div style={{display: 'flex', flexDirection: 'column', gap: '0.75rem'}}>
                    {recentWords.length > 0 ? recentWords.slice(0, 5).map(word => (
                      <div key={word.id} style={{
                        display: 'flex',
                        justifyContent: 'space-between',
                        alignItems: 'center',
                        padding: '1rem',
                        backgroundColor: '#f8fafc',
                        borderRadius: '8px',
                        border: '1px solid #e2e8f0',
                        transition: 'all 0.2s',
                        cursor: 'pointer'
                      }}
                      onMouseEnter={(e) => {
                        e.target.style.backgroundColor = '#f1f5f9';
                        e.target.style.transform = 'translateY(-1px)';
                      }}
                      onMouseLeave={(e) => {
                        e.target.style.backgroundColor = '#f8fafc';
                        e.target.style.transform = 'translateY(0)';
                      }}
                      >
                        <div>
                          <div style={{
                            fontWeight: '600',
                            color: '#1f2937',
                            fontSize: '1rem',
                            marginBottom: '0.25rem'
                          }}>
                            {word.word}
                          </div>
                          <div style={{
                            fontSize: '0.8rem',
                            color: '#6b7280',
                            fontStyle: 'italic'
                          }}>
                            {word.articleTitle}
                          </div>
                        </div>
                        <div style={{
                          fontSize: '0.75rem',
                          color: '#9ca3af',
                          fontWeight: '500'
                        }}>
                          {formatTimeAgo(word.addedAt)}
                        </div>
                      </div>
                    )) : (
                      <div style={{
                        fontSize: '0.9rem',
                        color: '#6b7280',
                        fontStyle: 'italic',
                        textAlign: 'center',
                        padding: '2rem',
                        backgroundColor: '#f9fafb',
                        borderRadius: '8px',
                        border: '2px dashed #d1d5db'
                      }}>
                        {t.noSavedWords}
                      </div>
                    )}
                  </div>
                </div>

                {/* ìµœê·¼ ì¢‹ì•„ìš” ê¸°ì‚¬ */}
                <div>
                  <h4 style={{
                    fontWeight: '600',
                    color: '#374151',
                    marginBottom: '1rem',
                    fontSize: '1.1rem',
                    borderBottom: '2px solid #f3f4f6',
                    paddingBottom: '0.5rem'
                  }}>
                    {t.recentLikedArticles}
                  </h4>
                  <div style={{display: 'flex', flexDirection: 'column', gap: '0.75rem'}}>
                    {recentArticles.length > 0 ? recentArticles.slice(0, 5).map(article => (
                      <div key={article.id} style={{
                        padding: '1rem',
                        backgroundColor: '#f8fafc',
                        borderRadius: '8px',
                        border: '1px solid #e2e8f0',
                        transition: 'all 0.2s',
                        cursor: 'pointer'
                      }}
                      onMouseEnter={(e) => {
                        e.target.style.backgroundColor = '#f1f5f9';
                        e.target.style.transform = 'translateY(-1px)';
                      }}
                      onMouseLeave={(e) => {
                        e.target.style.backgroundColor = '#f8fafc';
                        e.target.style.transform = 'translateY(0)';
                      }}
                      >
                        <div style={{
                          fontWeight: '600',
                          color: '#1f2937',
                          fontSize: '0.95rem',
                          lineHeight: '1.4',
                          display: '-webkit-box',
                          WebkitLineClamp: 2,
                          WebkitBoxOrient: 'vertical',
                          overflow: 'hidden',
                          marginBottom: '0.5rem'
                        }}>
                          {article.title}
                        </div>
                        <div style={{
                          display: 'flex',
                          justifyContent: 'space-between',
                          alignItems: 'center'
                        }}>
                          <div style={{
                            fontSize: '0.8rem',
                            color: '#6b7280',
                            fontWeight: '500'
                          }}>
                            {article.category}
                          </div>
                          <div style={{
                            fontSize: '0.75rem',
                            color: '#9ca3af',
                            fontWeight: '500'
                          }}>
                            {formatTimeAgo(article.likedAt)}
                          </div>
                        </div>
                      </div>
                    )) : (
                      <div style={{
                        fontSize: '0.9rem',
                        color: '#6b7280',
                        fontStyle: 'italic',
                        textAlign: 'center',
                        padding: '2rem',
                        backgroundColor: '#f9fafb',
                        borderRadius: '8px',
                        border: '2px dashed #d1d5db'
                      }}>
                        {t.noLikedArticles}
                      </div>
                    )}
                  </div>
                </div>
              </div>
            </div>

          </PageContainer>
        </div>
      </MobileContentWrapper>
    </>
  );
};

export default Profile; 